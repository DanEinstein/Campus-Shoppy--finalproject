{% extends 'base/base.html' %} {% load static %} {% block content %}
<section class="ftco-section ftco-cart">
  <div class="container">
    <div class="row">
      <div class="col-md-12 ftco-animate">
        <div class="cart-list">
          <table class="table">
            <thead class="thead-primary">
              <tr class="text-center">
                <th>&nbsp;</th>
                <th>Product Image</th>
                <th>Product Details</th>
                <th>Price/Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              {% for item in wishlist_items %}
              <tr
                class="text-center wishlist-row"
                data-product-id="{{ item.product.id }}"
              >
                <td class="product-remove">
                  <a
                    href="{% url 'shop:remove_from_wishlist' item.id %}"
                    class="btn-remove"
                    aria-label="Remove {{ item.product.name }} from wishlist"
                  >
                    <span class="ion-ios-close"></span>
                  </a>
                </td>
                <td class="image-prod">
                  <div
                    class="img"
                    style="background-image: url({% if item.product.photo and item.product.photo.url %}{{ item.product.photo.url }}{% else %}{% static 'images/product-1.jpg' %}{% endif %});"
                    aria-label="{{ item.product.name }} Image"
                  ></div>
                </td>
                <td class="product-name text-left">
                  <h3>
                    <a href="{% url 'shop:product-details' item.product.id %}"
                      >{{ item.product.name|default:'[Product Name]' }}</a
                    >
                  </h3>
                  <p class="text-muted small">
                    {{ item.product.details|default:'No description available.'
                    }}
                  </p>
                </td>
                <td class="price-status">
                  <span class="price d-block"
                    >${{ item.product.price|default:'0.00' }}</span
                  >
                  {% if item.product.stock > 0 %}
                  <span class="badge badge-success">In Stock</span>
                  {% else %}
                  <span class="badge badge-danger">Out of Stock</span>
                  {% endif %}
                </td>
                <td class="product-action">
                  {% if item.product.stock > 0 %}
                  <form action="{% url 'cart:add_to_cart' item.product.id %}" method="post" class="d-inline">
                      {% csrf_token %}
                      <input type="hidden" name="quantity" value="1">
                      <input type="hidden" name="update" value="False">
                      <button type="submit" class="btn btn-primary py-2 px-4" aria-label="Add {{ item.product.name }} to cart">
                          Add to Cart
                      </button>
                  </form>
                  {% else %}
                  <button class="btn btn-secondary py-2 px-4" disabled>
                    Out of Stock
                  </button>
                  {% endif %}
                </td>
              </tr>
              {% empty %}
              <tr>
                <td colspan="5" class="text-center py-5">
                  <h4 class="mb-3">Your Wishlist is Empty!</h4>
                  <p>
                    Start saving items you love by browsing our
                    <a href="{% url 'shop:shop' %}" class="text-primary">Shop</a>.
                  </p>
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock %}
