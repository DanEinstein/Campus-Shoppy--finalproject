{% extends 'base/base.html' %}
{% load static %}

{% block title %}Home | Campus Shoppy{% endblock %}

{% block content %}
<!-- Mobile-Optimized Hero Section -->
<section class="hero-mobile">
  <div id="heroCarousel" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-indicators">
      <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="0" class="active"></button>
      <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="1"></button>
    </div>
    
    <div class="carousel-inner">
      <div class="carousel-item active">
        <div class="hero-slide" style="background-image: url({% static 'images/happyMasenostudents.jpg' %});">
          <div class="hero-overlay"></div>
          <div class="container">
            <div class="hero-content text-center">
              <h1 class="hero-title">Welcome to Campus Shoppy</h1>
              <p class="hero-subtitle">We deliver to wherever you are Anytime, Anyplace</p>
              <a href="{% url 'shop' %}" class="btn btn-primary btn-lg">Shop Now</a>
            </div>
          </div>
        </div>
      </div>
      
      <div class="carousel-item">
        <div class="hero-slide" style="background-image: url({% static 'images/happy.jpg' %});">
          <div class="hero-overlay"></div>
          <div class="container">
            <div class="hero-content text-center">
              <h1 class="hero-title">100% Quality Goods</h1>
              <p class="hero-subtitle">We deliver quality products to wherever you are</p>
              <a href="{% url 'shop' %}" class="btn btn-primary btn-lg">Shop Now</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Services Section -->
<section class="services-section py-5">
  <div class="container">
    <div class="row g-4">
      <div class="col-6 col-md-3">
        <div class="service-card text-center">
          <div class="service-icon">
            <i class="fas fa-shipping-fast"></i>
          </div>
          <h5>Free Shipping</h5>
          <p class="small">On order over Ksh 2,000</p>
        </div>
      </div>
      <div class="col-6 col-md-3">
        <div class="service-card text-center">
          <div class="service-icon">
            <i class="fas fa-award"></i>
          </div>
          <h5>Quality Goods</h5>
          <p class="small">Always premium quality</p>
        </div>
      </div>
      <div class="col-6 col-md-3">
        <div class="service-card text-center">
          <div class="service-icon">
            <i class="fas fa-star"></i>
          </div>
          <h5>Superior Quality</h5>
          <p class="small">Best products</p>
        </div>
      </div>
      <div class="col-6 col-md-3">
        <div class="service-card text-center">
          <div class="service-icon">
            <i class="fas fa-headset"></i>
          </div>
          <h5>Support</h5>
          <p class="small">24/7 customer support</p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Featured Products Section -->
<section class="featured-products py-5 bg-light">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <h2 class="section-title text-center mb-5">Featured Products</h2>
      </div>
    </div>
    
    {% if featured_products %}
    <div class="row g-4">
      {% for product in featured_products %}
      <div class="col-6 col-md-4 col-lg-3">
        <div class="product-card">
          <div class="product-image">
            <img src="{% if product.image %}{{ product.image.url }}{% else %}{% static 'images/product-1.jpg' %}{% endif %}" 
                 class="img-fluid" 
                 alt="{{ product.name }}">
            <div class="product-overlay">
              <a href="{% url 'shop:product-details' product.id %}" class="btn btn-primary btn-sm">
                <i class="fas fa-eye"></i> View
              </a>
            </div>
          </div>
          <div class="product-info">
            <h6 class="product-name">{{ product.name|truncatechars:20 }}</h6>
            <p class="product-price">Ksh {{ product.price }}</p>
            <a href="{% url 'cart:add_to_cart' product.id %}" class="btn btn-outline-primary btn-sm w-100">
              <i class="fas fa-cart-plus"></i> Add to Cart
            </a>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
    
    <div class="text-center mt-4">
      <a href="{% url 'shop' %}" class="btn btn-primary btn-lg">
        <i class="fas fa-store"></i> View All Products
      </a>
    </div>
    {% else %}
    <div class="text-center">
      <p class="text-muted">No featured products available at the moment.</p>
      <a href="{% url 'shop' %}" class="btn btn-primary">
        <i class="fas fa-store"></i> Browse Products
      </a>
    </div>
    {% endif %}
  </div>
</section>

<!-- About Section -->
<section class="about-section py-5">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-12 col-md-6 mb-4 mb-md-0">
        <h2 class="section-title">About Campus Shoppy</h2>
        <p class="lead">Your trusted partner for quality products and reliable delivery.</p>
        <p>We are committed to providing the best shopping experience for students and the community. With our wide range of products and fast delivery service, we ensure you get what you need, when you need it.</p>
        <a href="{% url 'about' %}" class="btn btn-outline-primary">
          <i class="fas fa-info-circle"></i> Learn More
        </a>
      </div>
      <div class="col-12 col-md-6">
        <div class="about-image">
          <img src="{% static 'images/about.jpg' %}" class="img-fluid rounded" alt="About Campus Shoppy">
        </div>
      </div>
    </div>
  </div>
</section>

<!-- CTA Section -->
<section class="cta-section py-5 bg-primary text-white">
  <div class="container">
    <div class="row">
      <div class="col-12 text-center">
        <h2 class="mb-3">Ready to Start Shopping?</h2>
        <p class="lead mb-4">Join thousands of satisfied customers who trust Campus Shoppy for their shopping needs.</p>
        <div class="d-flex flex-column flex-md-row gap-3 justify-content-center">
          <a href="{% url 'shop' %}" class="btn btn-light btn-lg">
            <i class="fas fa-shopping-bag"></i> Start Shopping
          </a>
          <a href="{% url 'signup' %}" class="btn btn-outline-light btn-lg">
            <i class="fas fa-user-plus"></i> Create Account
          </a>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
/* Mobile-First Hero Section */
.hero-mobile {
  position: relative;
  height: 60vh;
  min-height: 400px;
  overflow: hidden;
}

.hero-slide {
  height: 100%;
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  display: flex;
  align-items: center;
  position: relative;
}

.hero-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.4);
  z-index: 1;
}

.hero-content {
  position: relative;
  z-index: 2;
  color: white;
}

.hero-title {
  font-size: 2rem;
  font-weight: 700;
  margin-bottom: 1rem;
}

.hero-subtitle {
  font-size: 1.1rem;
  margin-bottom: 2rem;
  opacity: 0.9;
}

/* Services Section */
.services-section {
  background: #f8f9fa;
}

.service-card {
  padding: 2rem 1rem;
  background: white;
  border-radius: 1rem;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  height: 100%;
  transition: transform 0.3s ease;
}

.service-card:hover {
  transform: translateY(-5px);
}

.service-icon {
  width: 60px;
  height: 60px;
  background: linear-gradient(135deg, #007bff, #0056b3);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 1rem;
  color: white;
  font-size: 1.5rem;
}

/* Product Cards */
.product-card {
  background: white;
  border-radius: 1rem;
  overflow: hidden;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  transition: transform 0.3s ease;
  height: 100%;
}

.product-card:hover {
  transform: translateY(-5px);
}

.product-image {
  position: relative;
  height: 200px;
  overflow: hidden;
}

.product-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.3s ease;
}

.product-card:hover .product-image img {
  transform: scale(1.05);
}

.product-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0,0,0,0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.product-card:hover .product-overlay {
  opacity: 1;
}

.product-info {
  padding: 1rem;
}

.product-name {
  font-weight: 600;
  margin-bottom: 0.5rem;
  color: #333;
}

.product-price {
  font-size: 1.1rem;
  font-weight: 700;
  color: #007bff;
  margin-bottom: 1rem;
}

/* Section Titles */
.section-title {
  font-size: 2rem;
  font-weight: 700;
  color: #333;
  margin-bottom: 1rem;
}

/* About Section */
.about-section {
  background: white;
}

.about-image img {
  border-radius: 1rem;
  box-shadow: 0 10px 30px rgba(0,0,0,0.1);
}

/* CTA Section */
.cta-section {
  background: linear-gradient(135deg, #007bff, #0056b3);
}

/* Mobile Responsive */
@media (max-width: 768px) {
  .hero-mobile {
    height: 50vh;
    min-height: 300px;
  }
  
  .hero-title {
    font-size: 1.5rem;
  }
  
  .hero-subtitle {
    font-size: 1rem;
  }
  
  .service-card {
    padding: 1.5rem 1rem;
  }
  
  .service-icon {
    width: 50px;
    height: 50px;
    font-size: 1.2rem;
  }
  
  .section-title {
    font-size: 1.5rem;
  }
  
  .product-image {
    height: 150px;
  }
}

@media (max-width: 576px) {
  .hero-mobile {
    height: 40vh;
    min-height: 250px;
  }
  
  .hero-title {
    font-size: 1.3rem;
  }
  
  .hero-subtitle {
    font-size: 0.9rem;
  }
  
  .btn-lg {
    padding: 0.75rem 1.5rem;
    font-size: 1rem;
  }
}
</style>

<script>
// Auto-advance carousel
document.addEventListener('DOMContentLoaded', function() {
  const carousel = document.getElementById('heroCarousel');
  if (carousel) {
    // Auto-advance every 5 seconds
    setInterval(() => {
      const nextButton = carousel.querySelector('.carousel-control-next');
      if (nextButton) {
        nextButton.click();
      }
    }, 5000);
  }
});
</script>
{% endblock %}
